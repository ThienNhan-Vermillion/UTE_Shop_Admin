{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///D:/2022-2025/HK1_nam4/CacCongNghePhanMemMoi/baiTapNhom/tonghop/Admin/UTEShop_Frontend/my-next-app/src/services/api.services.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:3001';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Auth API\nexport const login = async (username: string, password: string) => {\n  const response = await api.post('/auth/login', { username, password });\n  return response.data;\n};\n\nexport const checkUsernameAvailable = async (username: string) => {\n  const response = await api.get(`/auth/check-username?username=${username}`);\n  return response.data;\n};\n\nexport const checkEmailAvailable = async (email: string) => {\n  const response = await api.get(`/auth/check-email?email=${email}`);\n  return response.data;\n};\n\nexport const registerRequestOtp = async (userData: any) => {\n  const response = await api.post('/auth/register/request-otp', userData);\n  return response.data;\n};\n\nexport const registerConfirm = async (otp: string, userData: any) => {\n  const response = await api.post('/auth/register/confirm', { otp, ...userData });\n  return response.data;\n};\n\nexport const forgotPassword = async (email: string) => {\n  const response = await api.post('/auth/forgot-password', { email });\n  return response.data;\n};\n\nexport const verifyForgotOtp = async (email: string, otp: string) => {\n  // Endpoint này không tồn tại trong backend, sẽ được xử lý trong resetPassword\n  throw new Error('Use resetPassword instead');\n};\n\nexport const resetPassword = async (email: string, otp: string, newPassword: string, confirmPassword: string) => {\n  const response = await api.post('/auth/reset-password', {\n    email,\n    otp,\n    newPassword,\n    confirmPassword,\n  });\n  return response.data;\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAE7D,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAGO,MAAM,QAAQ,OAAO,UAAkB;IAC5C,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,eAAe;QAAE;QAAU;IAAS;IACpE,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,yBAAyB,OAAO;IAC3C,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC,CAAC,8BAA8B,EAAE,UAAU;IAC1E,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,sBAAsB,OAAO;IACxC,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC,CAAC,wBAAwB,EAAE,OAAO;IACjE,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,qBAAqB,OAAO;IACvC,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,8BAA8B;IAC9D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,kBAAkB,OAAO,KAAa;IACjD,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,0BAA0B;QAAE;QAAK,GAAG,QAAQ;IAAC;IAC7E,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,iBAAiB,OAAO;IACnC,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,yBAAyB;QAAE;IAAM;IACjE,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,kBAAkB,OAAO,OAAe;IACnD,8EAA8E;IAC9E,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,gBAAgB,OAAO,OAAe,KAAa,aAAqB;IACnF,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,wBAAwB;QACtD;QACA;QACA;QACA;IACF;IACA,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///D:/2022-2025/HK1_nam4/CacCongNghePhanMemMoi/baiTapNhom/tonghop/Admin/UTEShop_Frontend/my-next-app/src/components/ForgotPassword.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { forgotPassword, resetPassword } from '../services/api.services';\n\nexport default function ForgotPassword() {\n  const [email, setEmail] = useState('');\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [step, setStep] = useState(1);\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n\n  const handleEmailSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setMessage('');\n    try {\n      await forgotPassword(email);\n      setMessage('OTP đã được gửi đến email của bạn');\n      setStep(2);\n    } catch (err: any) {\n      setError(err.response?.data?.message || 'Lỗi server');\n    }\n  };\n\n  const handleOtpChange = (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\n    const newOtp = [...otp];\n    newOtp[index] = e.target.value;\n    setOtp(newOtp);\n    if (e.target.value && index < 5) {\n      const nextInput = document.getElementById(`otp-${index + 1}`) as HTMLInputElement;\n      if (nextInput) nextInput.focus();\n    }\n  };\n\n  const handleOtpSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setMessage('');\n    const otpCode = otp.join('');\n    if (otpCode.length !== 6) {\n      setError('Vui lòng nhập đầy đủ 6 số OTP');\n      return;\n    }\n    setMessage('OTP hợp lệ, vui lòng nhập mật khẩu mới');\n    setStep(3);\n  };\n\n  const handlePasswordSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setMessage('');\n    try {\n      const otpCode = otp.join('');\n      await resetPassword(email, otpCode, newPassword, confirmPassword);\n      setMessage('Đặt lại mật khẩu thành công');\n      setStep(1);\n      setEmail('');\n      setOtp(['', '', '', '', '', '']);\n      setNewPassword('');\n      setConfirmPassword('');\n    } catch (err: any) {\n      setError(err.response?.data?.message || 'Lỗi server');\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-400 via-blue-500 to-purple-600\">\n      <div className=\"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md mx-4\">\n        <h2 className=\"text-3xl font-bold mb-6 text-center text-gray-800\">Quên mật khẩu</h2>\n\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\n      {message && <p className=\"text-green-500 mb-4\">{message}</p>}\n\n      {step === 1 && (\n        <form onSubmit={handleEmailSubmit}>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700\">Email</label>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full p-2 border rounded-md focus:ring focus:ring-blue-300\"\n              required\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600\"\n          >\n            Gửi OTP\n          </button>\n        </form>\n      )}\n\n      {step === 2 && (\n        <form onSubmit={handleOtpSubmit}>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700\">Nhập mã OTP (6 số)</label>\n            <div className=\"flex space-x-2\">\n              {otp.map((digit, index) => (\n                <input\n                  key={index}\n                  id={`otp-${index}`}\n                  type=\"text\"\n                  maxLength={1}\n                  value={digit}\n                  onChange={(e) => handleOtpChange(e, index)}\n                  className=\"w-12 p-2 border rounded-md text-center focus:ring focus:ring-blue-300\"\n                  required\n                />\n              ))}\n            </div>\n          </div>\n          <button\n            type=\"submit\"\n            className=\"w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600\"\n          >\n            Xác nhận OTP\n          </button>\n        </form>\n      )}\n\n      {step === 3 && (\n        <form onSubmit={handlePasswordSubmit}>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700\">Mật khẩu mới</label>\n            <input\n              type=\"password\"\n              value={newPassword}\n              onChange={(e) => setNewPassword(e.target.value)}\n              className=\"w-full p-2 border rounded-md focus:ring focus:ring-blue-300\"\n              required\n            />\n          </div>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700\">Xác nhận mật khẩu mới</label>\n            <input\n              type=\"password\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n              className=\"w-full p-2 border rounded-md focus:ring focus:ring-blue-300\"\n              required\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600\"\n          >\n            Đặt lại mật khẩu\n          </button>\n        </form>\n      )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}